---
title: 前端常见知识点（三）
tags:
  - 学习
  - 前端
categories:
  - 学习
abbrlink: fdf2cd9a
date: 2019-03-07 14:49:40
---

# 作用域

前面讲到闭包的时候，我们说闭包是「是指有权访问另一个函数**作用域**中的变量的函数」，那么所谓的「作用域」又是什么呢？

<!--more-->

## 什么是作用域？

先来看一个例子：

```javascript
var a = 'Hello!'

function greet() {
    console.log(a)
}
greet() // Hello!
```

在这段代码中，我们在`greet`函数外部定义了一个变量`a`，函数`greet`首先在自己的**作用域**中查找变量`a`，没有找到后再在外部的全局**作用域**中查找，找到之后将其打印输出。

接下来是另外一个例子：

```javascript
var a = 'Hello!'

function greet () {
    var b = 'world!'
    console.log(b)
}
greet() // world!
console.log(a) // Hello!
console.log(b) // ReferenceError: b is not defined
```

在这段代码中，我们在`greet`函数内部定义了一个变量`b`，调用`greet`函数能够正常将其打印输出，但是当我们在外部直接输出变量`b`的时候却报错了，也就是说，在全局**作用域**里，变量`b`是未定义的。

于是我们知道，JavaScript 的**作用域**是通过**函数**来实现的，在函数**内部**定义的变量，在函数的**外部**是不可以访问的。

在 ES6 的`let`、`const`关键字提出来之前，JavaScript 的作用域只有两种：「全局作用域」和「函数（局部）作用域」。**JavaScript 是没有「块作用域」的。**

## 作用域链

依旧是第一个例子：

```javascript
var a = 'Hello!'

function greet() {
    console.log(a)
}
greet() // Hello!
```

我们查找变量`a`的过程是：首先在函数`greet`的作用域中查找，之后到函数的上一层（这里是全局）作用域中查找，这样**逐步向外**查找的过程形成一个链条，就称作「作用域链」。

下面来看一个例子：

```js
var a = 'window'
function outter () {
    var a = 'outter'
    function inner () {
        var a = 'inner'
        console.log(a)
    }
    inner() // inner
    console.log(a)
}
outter() // outter
console.log(a) // window
```

如果把`inner`函数中的`a`的定义注释掉，那么`ineer()`的输出就是`outter`；如果再把`outter`函数中的`a`定义注释掉，那么三个输出就全都是`window`；这里的作用域链就是`inner`->`outter`->`window`（全局）。